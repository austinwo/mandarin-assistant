<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Mandarin Assistant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>

  <body>
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-lg-10 mx-auto">

          <h1>English -> Mandarin Assistant</h1>
          <p class="subtitle">
            Type what you want to say in <strong>English</strong>.<br>
            Iâ€™ll give you Thai, Chinese, Pinyin, and how to read Chinese with Thai letters.
          </p>

          <!-- INPUT CARD -->
          <div class="card shadow-lg mb-3 p-4">
            <form method="POST">
              <div class="mb-3">
                <label for="query" class="form-label">What do you want to say?</label>
                <input
                  type="text"
                  class="form-control"
                  id="query"
                  name="query"
                  placeholder="e.g. I'm Thai but I live in USA"
                  value="{{ user_input or '' }}"
                  autocomplete="off"
                  autofocus
                >
              </div>

              <div class="d-flex justify-content-between align-items-center gap-3">
                <button type="submit" class="btn btn-primary">
                  Translate
                </button>

                {% if score is not none %}
                  <span class="score-pill">
                    Similarity: {{ score }}
                  </span>
                {% endif %}
              </div>
            </form>
          </div>

          <!-- RANDOM PHRASE BUTTON -->
          <div class="text-center mb-4">
            <form action="{{ url_for('random_phrase') }}" method="POST">
              <button type="submit" class="btn btn-outline-secondary btn-lg">
                ðŸŽ² Inspire me â€” show a random phrase
              </button>
            </form>
          </div>

          <!-- RESULT CARD -->
          {% if result %}
          <div class="result-card">
            <h5 class="mb-3">Result</h5>

            <div class="result-line">
              <span class="result-label">EN</span>
              <span class="result-value">{{ result.en }}</span>
            </div>

            <div class="result-line">
              <span class="result-label">TH</span>
              <span class="result-value">{{ result.thai }}</span>
            </div>

            <div class="result-line">
              <span class="result-label">ZH Traditional</span>
              <span class="result-value">{{ result.zh_trad }}</span>
            </div>

            <div class="result-line">
              <span class="result-label">ZH Simplified</span>
              <span class="result-value">{{ result.zh }}</span>
            </div>

            <div class="result-line">
              <span class="result-label">PINYIN</span>
              <span class="result-value">{{ result.pinyin }}</span>
            </div>

            <div class="result-line">
              <span class="result-label">ZH-TH</span>
              <span class="result-value">{{ result.zh_thai }}</span>
            </div>
          </div>

          {% elif no_good_match %}
          <!-- LOW-CONFIDENCE / NO-GOOD-MATCH -->
          <div class="alert alert-warning no-match-card" role="alert">
            <h5 class="alert-heading mb-2">Not sure about that one</h5>
            <p class="mb-1">
              I couldnâ€™t find a close match for
              <strong>"{{ user_input }}"</strong>.
              {% if score is not none %}
                (Best match confidence: {{ score }})
              {% endif %}
            </p>

            {% if suggestions %}
              <p class="mb-2">Try one of these instead:</p>
              <ul class="mb-0">
                {% for s in suggestions %}
                  <li>{{ s }}</li>
                {% endfor %}
              </ul>
            {% else %}
              <p class="mb-0">
                Try rephrasing, or use a more complete sentence like:
                <em>"I live in Thailand."</em>
              </p>
            {% endif %}
          </div>
          {% endif %}

        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
